# Датчики

Вариант решения тестового задания - агрегатор показаний датчиков температуры.
По условиям, агрегатор получает показания в реальном времени, не сохраняя и не кэшируя их.

## Сборка проекта

```bash
make
```

После сборки в папке bin появятся бинарные файлы

## Эмулятор датчика

Эмулятор слушает входящие соединения по протоколу HTTP и 
на любой запрос отдаёт ответ в формате JSON со своим идентификатором и случайной температурой
в диапазоне -30 +50. 

Запуск:

```bash
sensoremu -h localhost -p 8081 -i 5d316ee8-a785-4e87-91d8-06f901c98a88
```

Принимаемые параметры:
* -h (опциональный) - хост, на котором эмулятор должен ждать подключений, по умолчанию localhost.
* -p (опциональный) - порт, на котором эмулятор должен ждать подключений, по умолчанию 8081.
* -i (опциональный) - идентификатор датчика, сообщаемый в ответе, по умолчанию 5d316ee8-a785-4e87-91d8-06f901c98a88. 

## Агрегатор показаний датчиков

Слушает входящие соединения по протоколу HTTP.
На запрос GET / возвращает JSON с показаниями датчиков.
На запрос GET /docs возвращает UI OpenAPI

Запуск:

```bash
sensors -h localhost -p 8080
```

Принимаемые параметры:
* -h (опциональный) - хост, на котором эмулятор должен ждать подключений, по умолчанию localhost.
* -p (опциональный) - порт, на котором эмулятор должен ждать подключений, по умолчанию 8080.

## Изменение проекта

Генерация кода по спецификации OpenAPI

```bash
oapi-codegen -config docs/oapi-codegen.yaml docs/sensors-api.yaml
```